# Summary: Section 6.12.1 ProcessMonitor Widget

## Overview

Implemented a comprehensive ProcessMonitor widget for BEAM process introspection, providing a terminal-based alternative to Observer for monitoring live processes.

## What Was Built

### Core Widget (`lib/term_ui/widgets/process_monitor.ex`)

~850 lines implementing:

- **Process List Display**: Shows PID, registered name, reductions, memory, message queue length, and status
- **Live Updates**: Configurable refresh interval (default 1000ms) with manual refresh option
- **Sorting**: Six sort fields (pid, name, reductions, memory, queue, status) with ascending/descending toggle
- **Filtering**: Regex-based filtering by process name or module
- **Warning Thresholds**: Color-coded indicators for queue depth and memory usage
- **Detail Panel**: Three modes (info, links, trace) showing expanded process information
- **Process Actions**: Kill, suspend, and resume with confirmation dialogs

### Keyboard Controls

| Key | Action |
|-----|--------|
| Up/Down | Navigate process list |
| PageUp/PageDown | Scroll by page |
| Home/End | Jump to first/last |
| Enter | Toggle details panel |
| r | Refresh now |
| s | Cycle sort field |
| S | Toggle sort direction |
| / | Start filter input |
| l | Show links/monitors |
| t | Show stack trace |
| k | Kill process (confirms) |
| p | Suspend/resume process |
| Escape | Clear filter/close details |

### Public API

```elixir
ProcessMonitor.new(opts)           # Create props
ProcessMonitor.init(props)         # Initialize state
ProcessMonitor.refresh(state)      # Force refresh
ProcessMonitor.set_interval(state, ms)  # Change update interval
ProcessMonitor.set_sort(state, field, direction)  # Set sorting
ProcessMonitor.set_filter(state, pattern)  # Set filter
ProcessMonitor.get_selected(state) # Get selected process
ProcessMonitor.process_count(state)  # Get count
ProcessMonitor.get_stack_trace(pid)  # Get stack trace
```

### Warning Thresholds

Default thresholds (configurable):
- Queue warning: 1,000 messages
- Queue critical: 10,000 messages
- Memory warning: 50 MB
- Memory critical: 200 MB

## Test Coverage

44 tests covering:
- Props and initialization
- Navigation (up/down/page/home/end)
- Sorting (all 6 fields, direction toggle)
- Filtering (input, apply, clear, regex)
- Details panel (info, links, trace modes)
- Process actions (kill, suspend with confirmation)
- Refresh and timer
- Public API functions
- Callbacks (on_select, on_action)
- Rendering

## Example Application

`examples/process_monitor/` demonstrates:
- Live process monitoring
- Sorting and filtering
- Process details view
- Worker process spawning (press 'w')

Run with: `cd examples/process_monitor && mix run -e "TermUI.run(ProcessMonitorExample.App)"`

## Files Created/Modified

| File | Lines | Description |
|------|-------|-------------|
| `lib/term_ui/widgets/process_monitor.ex` | ~850 | Main widget implementation |
| `test/term_ui/widgets/process_monitor_test.exs` | ~480 | Comprehensive test suite |
| `examples/process_monitor/mix.exs` | 27 | Example project file |
| `examples/process_monitor/lib/process_monitor/application.ex` | 13 | Application module |
| `examples/process_monitor/lib/process_monitor/app.ex` | 233 | Example TUI app |
| `notes/features/6.12.1-processmonitor-widget.md` | ~207 | Planning document |

## Requirements Completed

- [x] 6.12.1.1 Implement process list with PID, name, reductions, memory
- [x] 6.12.1.2 Implement live stats updates (configurable interval)
- [x] 6.12.1.3 Implement message queue depth display and warnings
- [x] 6.12.1.4 Implement process links/monitors visualization
- [x] 6.12.1.5 Implement stack trace display on selection
- [x] 6.12.1.6 Implement process actions (kill, suspend, resume)
- [x] 6.12.1.7 Implement sorting by reductions/memory/queue
- [x] 6.12.1.8 Implement process filtering by name/module

## Technical Notes

- Uses `Process.list/0` and `Process.info/2` for introspection
- Handles process death gracefully during info fetching
- Uses `:erlang.suspend_process/1` and `:erlang.resume_process/1` for pause/resume
- Implements confirmation dialog pattern for destructive actions
- System processes can be optionally shown via `show_system_processes: true`
