# Summary: Task 2.8.1 - Implement Mouse Tracking Enable

**Branch:** `feature/2.8.1-mouse-tracking-enable`
**Date:** 2025-12-05
**Status:** Complete

## Overview

Implemented `enable_mouse/2` function for the Raw backend to enable mouse tracking with configurable modes after initialization.

## Implementation Highlights

### Function Signature

```elixir
@spec enable_mouse(t(), :click | :drag | :all) :: {:ok, t()}
def enable_mouse(state, mode) when mode in [:click, :drag, :all]
```

### Mouse Mode Mapping

| Backend Mode | ANSI Mode | Escape Sequence | Description |
|--------------|-----------|-----------------|-------------|
| `:click`     | `:normal` | `ESC[?1000h`    | Button press/release only |
| `:drag`      | `:button` | `ESC[?1002h`    | Press/release + motion while pressed |
| `:all`       | `:all`    | `ESC[?1003h`    | All mouse motion events |

All modes also enable SGR extended mode (`ESC[?1006h`) for accurate coordinate encoding.

### Key Features

1. **Mode Switching**: Properly disables current mode before enabling new mode
2. **Idempotent**: Returns unchanged state if already in requested mode
3. **State Tracking**: Updates `mouse_mode` field in backend state

## Files Modified

| File | Lines Changed |
|------|---------------|
| `lib/term_ui/backend/raw.ex` | +70 (enable_mouse/2 function) |
| `test/term_ui/backend/raw_test.exs` | +90 (10 new tests) |
| `notes/planning/multi-renderer/phase-02-raw-backend.md` | Updated |
| `notes/features/2.8.1-mouse-tracking-enable.md` | Created |

## Test Coverage

10 new tests covering:
- Enable click tracking mode
- Enable drag tracking mode
- Enable all movement tracking mode
- Idempotent behavior (same mode)
- Mode switching between modes
- State field preservation
- Documentation verification
- ANSI mode mappings (click → normal, drag → button, all → all)

## Verification

- `mix compile` - no warnings
- 153 tests pass (10 new)
- `mix format --check-formatted` - properly formatted

## API

```elixir
# Enable click tracking
{:ok, state} = Raw.enable_mouse(state, :click)

# Enable drag tracking
{:ok, state} = Raw.enable_mouse(state, :drag)

# Enable all movement tracking
{:ok, state} = Raw.enable_mouse(state, :all)

# Idempotent - no change if already in mode
{:ok, same_state} = Raw.enable_mouse(state, :click)
```

## Next Steps

The next task in Section 2.8 is:
- **Task 2.8.2**: Implement Mouse Tracking Disable (`disable_mouse/1`)
