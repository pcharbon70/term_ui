# Summary: Section 4.4 Flexbox-Inspired Alignment

## Overview

Implemented Flexbox-inspired alignment for positioning components within their allocated space. Provides familiar justify/align controls for precise component placement.

## Changes Made

### New Files

- `lib/term_ui/layout/alignment.ex` - Alignment functions
- `test/term_ui/layout/alignment_test.exs` - Comprehensive unit tests (33 tests)

### Implementation Details

#### Justify Content (Main Axis)

| Option | Description |
|--------|-------------|
| `:start` | Pack at beginning |
| `:center` | Center in available space |
| `:end` | Pack at end |
| `:space_between` | Equal space between components |
| `:space_around` | Equal space around each component |

#### Align Items (Cross Axis)

| Option | Description |
|--------|-------------|
| `:start` | Position at cross-axis start |
| `:center` | Center on cross-axis |
| `:end` | Position at cross-axis end |
| `:stretch` | Expand to fill cross-axis |

#### Align Self

Per-component override of container alignment using `align_self` list option.

#### Margin and Padding

- `apply_margins/2` - shrink rectangles by margin
- `apply_padding/2` - shrink content area
- `parse_spacing/1` - parse shorthand (10, {5, 10}, {1, 2, 3, 4})

### Main Functions

| Function | Purpose |
|----------|---------|
| `apply/3` | Apply justify and align to rectangles |
| `apply_margins/2` | Apply margins to rectangles |
| `apply_padding/2` | Apply padding to a rectangle |
| `parse_spacing/1` | Parse spacing shorthand |

## Test Coverage

33 unit tests covering:
- All justify options (start, center, end, space_between, space_around)
- All align options (start, center, end, stretch)
- align_self per-component overrides
- Vertical direction support
- Margin and padding application
- Spacing shorthand parsing
- Combined justify and align

All tests pass.

## Design Decisions

1. **Familiar API** - follows CSS Flexbox naming
2. **Post-solver adjustment** - alignment modifies solved positions
3. **Pure functions** - stateless, easy to test
4. **Per-component override** - align_self for flexibility
5. **Shorthand parsing** - convenient spacing specification

## Integration Points

This module will be used by:
- Container components for child positioning
- In combination with Solver for complete layout

## Usage Examples

```elixir
alias TermUI.Layout.{Solver, Alignment}

# Solve then align
rects = Solver.solve_to_rects(constraints, area)
aligned = Alignment.apply(rects, area,
  direction: :horizontal,
  justify: :space_between,
  align: :center
)

# With per-component alignment
aligned = Alignment.apply(rects, area,
  align: :start,
  align_self: [nil, :center, :end]
)

# Apply margins
margin = Alignment.parse_spacing(10)
with_margins = Alignment.apply_margins(rects, margin)

# Apply padding
padded = Alignment.apply_padding(rect, %{top: 5, right: 10, bottom: 5, left: 10})

# Spacing shorthand
Alignment.parse_spacing(10)           # all sides
Alignment.parse_spacing({5, 10})      # vertical, horizontal
Alignment.parse_spacing({1, 2, 3, 4}) # top, right, bottom, left
```

## Files Modified

- `notes/features/4.4-flexbox-alignment.md` - marked all tasks complete

## How to Test

```bash
mix test test/term_ui/layout/alignment_test.exs
```

## Next Steps

- Section 4.5: Style System - colors, text attributes, and inheritance
- Integrate alignment into Container components
