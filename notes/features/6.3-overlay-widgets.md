# Feature Plan: Section 6.3 - Overlay Widgets

## Problem Statement

TermUI needs overlay widgets that display content above the normal component tree. Dialogs provide modal interaction for confirmations and forms. Alert dialogs offer standardized message patterns. Toast notifications display brief non-blocking messages. These patterns are essential for user feedback and critical interactions.

## Solution Overview

Implement three overlay widgets:

1. **Dialog Widget** - Modal overlay with title, content, and callbacks
2. **Alert Dialog** - Specialized dialog for messages with standard buttons
3. **Toast Notifications** - Brief auto-dismissing messages at screen edge

### Key Design Decisions

- **StatefulComponent-based** - All widgets maintain visibility and interaction state
- **Z-ordering** - Overlays render above normal content (z-index 100+)
- **Focus trapping** - Dialogs prevent Tab from escaping
- **Backdrop** - Semi-transparent background to separate from content
- **Auto-dismiss** - Toasts disappear after configurable duration

## Technical Details

### File Structure

```
lib/term_ui/widgets/
├── dialog.ex           # Dialog widget
├── alert_dialog.ex     # Alert dialog widget
└── toast.ex            # Toast notifications
```

### Dependencies

- `TermUI.StatefulComponent` - Behaviour for stateful widgets
- `TermUI.Component.Helpers` - Render tree builders
- `TermUI.Event` - Keyboard and mouse events

## Implementation Plan

### Task 6.3.1: Dialog Widget

- [x] 6.3.1.1 Implement dialog container with title bar and content area
- [x] 6.3.1.2 Implement centering within terminal window
- [x] 6.3.1.3 Implement backdrop rendering behind dialog
- [x] 6.3.1.4 Implement focus trapping preventing Tab escape
- [x] 6.3.1.5 Implement Escape handling for dialog close
- [x] 6.3.1.6 Implement `on_close` and `on_confirm` callbacks

### Task 6.3.2: Alert Dialog

- [x] 6.3.2.1 Implement alert types: info, warning, error, success, confirm
- [x] 6.3.2.2 Implement standard button configurations: OK, OK/Cancel, Yes/No
- [x] 6.3.2.3 Implement icon display for alert type
- [x] 6.3.2.4 Implement default focus on appropriate button

### Task 6.3.3: Toast Notifications

- [x] 6.3.3.1 Implement toast positioning at screen edge
- [x] 6.3.3.2 Implement auto-dismiss with configurable duration
- [x] 6.3.3.3 Implement toast stacking for multiple notifications
- [x] 6.3.3.4 Implement toast types: info, success, warning, error

### Unit Tests

- [x] Test dialog renders centered with backdrop
- [x] Test dialog traps focus within content
- [x] Test Escape closes dialog
- [x] Test alert shows correct buttons for type
- [x] Test toast appears at correct position
- [x] Test toast auto-dismisses after duration
- [x] Test multiple toasts stack

## Success Criteria

1. Dialog displays centered with backdrop
2. Focus trapping works correctly
3. Alert dialogs show appropriate buttons and icons
4. Toasts auto-dismiss and stack properly
5. All keyboard shortcuts work
6. All unit tests pass

## Current Status

- **Planning**: Complete
- **Implementation**: Complete
- **Tests**: Complete (77 tests passing)
