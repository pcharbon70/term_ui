# Feature 1.4.2: Implement Configuration Validation

## Overview

Add validation functions to `TermUI.Backend.Config` to catch configuration errors early. This includes module attributes defining valid values and functions to validate the current configuration.

## Reference

- Phase plan: `notes/planning/multi-renderer/phase-01-backend-selector.md`
- Task: 1.4.2 Implement Configuration Validation
- Part of: Section 1.4 Create Configuration Module
- Depends on: Task 1.4.1 (Configuration Reading) - completed

## Subtasks

- [x] 1.4.2.1 Define `@valid_backends [:auto, TermUI.Backend.Raw, TermUI.Backend.TTY, TermUI.Backend.Test]`
- [x] 1.4.2.2 Define `@valid_character_sets [:unicode, :ascii]`
- [x] 1.4.2.3 Define `@valid_line_modes [:full_redraw, :incremental]`
- [x] 1.4.2.4 Implement `validate!/0` that raises `ArgumentError` for invalid configuration
- [x] 1.4.2.5 Implement `valid?/0` returning boolean without raising

## Implementation Notes

### Module Attributes

```elixir
@valid_backends [:auto, TermUI.Backend.Raw, TermUI.Backend.TTY, TermUI.Backend.Test]
@valid_character_sets [:unicode, :ascii]
@valid_line_modes [:full_redraw, :incremental]
```

### Function Signatures

```elixir
@spec validate!() :: :ok
def validate!()

@spec valid?() :: boolean()
def valid?()
```

### Validation Rules

1. **Backend**: Must be `:auto` or one of the valid backend modules
2. **Character Set**: Must be `:unicode` or `:ascii`
3. **Fallback Character Set**: Must be `:unicode` or `:ascii`
4. **TTY Options**: Must be a keyword list; if `:line_mode` present, must be valid
5. **Raw Options**: Must be a keyword list

### Error Messages

`validate!/0` should raise `ArgumentError` with clear messages:
- `"invalid :backend value: :foo, expected one of [:auto, TermUI.Backend.Raw, ...]"`
- `"invalid :character_set value: :utf8, expected one of [:unicode, :ascii]"`
- `"invalid :line_mode value in :tty_opts: :partial, expected one of [:full_redraw, :incremental]"`

## Testing Strategy

- Test `validate!/0` returns `:ok` with valid config
- Test `validate!/0` raises for each invalid config type
- Test error messages are descriptive
- Test `valid?/0` returns true with valid config
- Test `valid?/0` returns false with invalid config (doesn't raise)

## Files Modified

- `lib/term_ui/backend/config.ex` - Add validation functions
- `test/term_ui/backend/config_test.exs` - Add validation tests
