# Feature: Task 2.4.1 - Implement clear/1 Callback

**Branch:** `feature/2.4.1-clear-callback`
**Base:** `multi-renderer`
**Date:** 2025-12-05

## Overview

Implement the `clear/1` callback for the Raw backend to clear the entire screen and reset cursor position to home. This is an essential screen management operation.

## Reference

See `notes/planning/multi-renderer/phase-02-raw-backend.md` Section 2.4.1.

## Tasks

### Implementation

- [ ] 2.4.1.1 Implement `@impl true` `clear/1` accepting state
- [ ] 2.4.1.2 Write `\e[2J` (clear entire screen)
- [ ] 2.4.1.3 Write `\e[1;1H` (move cursor to home position)
- [ ] 2.4.1.4 Reset `current_style` in state (style state unknown after clear)
- [ ] 2.4.1.5 Return `{:ok, updated_state}`

### Unit Tests

- [ ] Test `clear/1` returns `{:ok, state}`
- [ ] Test `clear/1` resets current_style to nil
- [ ] Test `clear/1` updates cursor_position to {1, 1}
- [ ] Test `clear/1` preserves other state fields

## Implementation Details

### ANSI Sequences

- `\e[2J` - ED (Erase Display) with parameter 2: Clear entire screen
- `\e[1;1H` or `\e[H` - CUP (Cursor Position): Move to row 1, column 1

### State Changes

After clear:
- `current_style` → `nil` (terminal style state is unknown)
- `cursor_position` → `{1, 1}` (cursor moved to home)

### Existing Infrastructure

The `TermUI.ANSI` module already provides:
- `clear_screen/0` - Returns `\e[2J`
- `cursor_position/2` - Returns cursor positioning sequence

## Files to Modify

- `lib/term_ui/backend/raw.ex` - Implement `clear/1`
- `test/term_ui/backend/raw_test.exs` - Add clear/1 tests

## Verification

1. `mix compile` - no warnings
2. `mix test test/term_ui/backend/raw_test.exs` - all tests pass
3. `mix format --check-formatted` - code formatted
