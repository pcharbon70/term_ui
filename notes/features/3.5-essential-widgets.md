# Feature Plan: 3.5 Essential Widgets

## Problem Statement

Applications need basic UI building blocks to construct interfaces. Without essential widgets:
- Developers must build common components from scratch
- No reference implementations for correct patterns
- Inconsistent behavior across applications

We need six essential widgets:
1. Block - Container with border
2. Label - Text display
3. Button - Clickable action
4. TextInput - Text entry
5. List - Selectable items
6. Progress - Progress indication

## Solution Overview

Implement six widgets demonstrating component patterns:
- Block uses Container behaviour
- Label uses Component behaviour (stateless)
- Button, TextInput, List, Progress use StatefulComponent behaviour

### Key Design Decisions

- **Behaviours match complexity** - Stateless widgets use Component, interactive use StatefulComponent
- **Props-based styling** - All styling via props
- **Callback props** - Event handlers passed as props (on_click, on_change, etc.)
- **RenderNode output** - All render methods return RenderNode trees

## Technical Details

### File Structure

```
lib/term_ui/widget/
├── block.ex        # Container with border
├── label.ex        # Text display
├── button.ex       # Clickable action
├── text_input.ex   # Text entry
├── list.ex         # Selectable items
└── progress.ex     # Progress bar/spinner

test/term_ui/widget/
├── block_test.exs
├── label_test.exs
├── button_test.exs
├── text_input_test.exs
├── list_test.exs
└── progress_test.exs
```

### Dependencies

- Section 3.1 (Component behaviours)
- Section 3.3 (Event routing, Event types)
- Renderer (Cell, Style, RenderNode)

## Implementation Plan

### Task 3.5.1: Block Widget

Container with border and optional title.

- [x] 3.5.1.1 Create `TermUI.Widget.Block` with Container behaviour
- [x] 3.5.1.2 Implement border styles: none, single, double, rounded, thick
- [x] 3.5.1.3 Implement title rendering with alignment
- [x] 3.5.1.4 Implement padding props
- [x] 3.5.1.5 Implement children layout within padded area

### Task 3.5.2: Label Widget

Simple text display.

- [x] 3.5.2.1 Create `TermUI.Widget.Label` with Component behaviour
- [x] 3.5.2.2 Implement text rendering with style props
- [x] 3.5.2.3 Implement alignment: left, center, right
- [x] 3.5.2.4 Implement text wrapping
- [x] 3.5.2.5 Implement truncation with ellipsis

### Task 3.5.3: Button Widget

Interactive clickable widget.

- [x] 3.5.3.1 Create `TermUI.Widget.Button` with StatefulComponent behaviour
- [x] 3.5.3.2 Implement state for focused, hovered, pressed
- [x] 3.5.3.3 Implement Enter/Space key handling
- [x] 3.5.3.4 Implement mouse click handling
- [x] 3.5.3.5 Implement visual states
- [x] 3.5.3.6 Implement on_click callback

### Task 3.5.4: TextInput Widget

Single-line text entry.

- [x] 3.5.4.1 Create `TermUI.Widget.TextInput` with StatefulComponent behaviour
- [x] 3.5.4.2 Implement state for value, cursor, selection
- [x] 3.5.4.3 Implement character input
- [x] 3.5.4.4 Implement cursor navigation
- [x] 3.5.4.5 Implement deletion (Backspace, Delete)
- [x] 3.5.4.6 Implement cursor rendering
- [x] 3.5.4.7 Implement on_change, on_submit callbacks

### Task 3.5.5: List Widget

Scrollable selectable list.

- [x] 3.5.5.1 Create `TermUI.Widget.List` with StatefulComponent behaviour
- [x] 3.5.5.2 Implement state for items, selected, scroll
- [x] 3.5.5.3 Implement arrow key navigation
- [x] 3.5.5.4 Implement scroll on selection change
- [x] 3.5.5.5 Implement item rendering with highlight
- [x] 3.5.5.6 Implement on_select callback
- [x] 3.5.5.7 Implement multi-select mode

### Task 3.5.6: Progress Widget

Progress bar and spinner.

- [x] 3.5.6.1 Create `TermUI.Widget.Progress` with StatefulComponent behaviour
- [x] 3.5.6.2 Implement bar mode with filled proportion
- [x] 3.5.6.3 Implement spinner mode with animation
- [x] 3.5.6.4 Implement percentage display
- [x] 3.5.6.5 Implement customizable characters

### Unit Tests - Section 3.5

- [x] Test Block border styles render correctly
- [x] Test Block title alignment
- [x] Test Label text alignment
- [x] Test Label truncation
- [x] Test Button Enter key activation
- [x] Test Button visual states
- [x] Test TextInput character input
- [x] Test TextInput cursor navigation
- [x] Test List arrow key navigation
- [x] Test List scroll behavior
- [x] Test Progress bar fill
- [x] Test Progress spinner animation

## Success Criteria

1. All six widgets implemented and functional
2. Each widget follows correct behaviour pattern
3. Widgets render correctly to RenderNode
4. Event handling works for interactive widgets
5. Callback props invoked correctly
6. All unit tests pass
7. Documentation complete

## Current Status

**Status**: Complete

### Completed
- All 6 widgets implemented
- 130 unit tests added
- All tests pass

### How to Run
```bash
mix test test/term_ui/widget/
```

## Notes

### Implementation Order

Starting with simpler widgets first:
1. Label (stateless, render only)
2. Progress (simple state)
3. Button (event handling)
4. Block (container)
5. List (scrolling)
6. TextInput (most complex)

### Border Characters

```
Single:  ┌─┐│ │└─┘
Double:  ╔═╗║ ║╚═╝
Rounded: ╭─╮│ │╰─╯
Thick:   ┏━┓┃ ┃┗━┛
```
