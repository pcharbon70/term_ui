# Feature Plan: Section 6.6 - Development Mode

## Problem Statement

TermUI needs development tools to help developers build and debug TUI applications efficiently. UI inspector shows component boundaries and state. Hot reload updates code without restart. Performance monitor displays real-time metrics. These tools leverage BEAM's introspection capabilities for excellent developer experience.

## Solution Overview

Implement four development mode features:

1. **UI Inspector** - Overlay showing component boundaries and names
2. **State Inspector** - Side panel with detailed component state tree
3. **Hot Reload Integration** - Code updates without restart
4. **Performance Monitor** - Real-time FPS, frame time, memory metrics

### Key Design Decisions

- **DevMode module** - Central coordinator for development features
- **Overlay rendering** - Inspector overlays above normal content
- **File watching** - Monitor .ex files for hot reload
- **BEAM introspection** - Leverage :erlang.process_info, :erlang.memory
- **Toggle controls** - Keyboard shortcuts to enable/disable features

## Technical Details

### File Structure

```
lib/term_ui/dev/
├── dev_mode.ex        # Central development mode coordinator
├── ui_inspector.ex    # Component boundary overlay
├── state_inspector.ex # State tree panel
├── hot_reload.ex      # File watching and code reload
└── perf_monitor.ex    # Performance metrics display
```

### Dependencies

- `TermUI.Component` - For component introspection
- `TermUI.Event` - Keyboard events for toggles
- `:file_system` - File watching (optional dependency)
- `:erlang` - Memory, process info

## Implementation Plan

### Task 6.6.1: UI Inspector

- [x] 6.6.1.1 Implement inspector overlay rendering component boundaries
- [x] 6.6.1.2 Implement component name and type display
- [x] 6.6.1.3 Implement state summary for selected component
- [x] 6.6.1.4 Implement render time display for performance debugging
- [x] 6.6.1.5 Implement toggle shortcut (e.g., Ctrl+Shift+I)

### Task 6.6.2: State Inspector

- [x] 6.6.2.1 Implement state panel as side drawer
- [x] 6.6.2.2 Implement tree view of component state
- [x] 6.6.2.3 Implement expand/collapse for nested state
- [x] 6.6.2.4 Implement state change highlighting

### Task 6.6.3: Hot Reload Integration

- [x] 6.6.3.1 Implement file watcher for .ex file changes
- [x] 6.6.3.2 Implement module recompilation on change
- [x] 6.6.3.3 Implement code purge and load for updated modules
- [x] 6.6.3.4 Implement state preservation across reload
- [x] 6.6.3.5 Implement reload notification in UI

### Task 6.6.4: Performance Monitor

- [x] 6.6.4.1 Implement FPS counter with rolling average
- [x] 6.6.4.2 Implement frame time graph
- [x] 6.6.4.3 Implement memory usage display
- [x] 6.6.4.4 Implement message queue monitoring

### Unit Tests

- [x] Test inspector overlay renders component boundaries
- [x] Test state panel displays component state tree
- [x] Test hot reload updates component code
- [x] Test state preservation across reload
- [x] Test performance metrics update in real-time

## Success Criteria

1. UI inspector shows component boundaries with toggle shortcut
2. State inspector displays expandable state tree
3. Hot reload updates code preserving state
4. Performance monitor shows FPS, memory, frame times
5. All features toggle independently
6. All unit tests pass

## Current Status

- **Planning**: Complete
- **Implementation**: Complete
- **Tests**: Complete (81 tests passing, 1 skipped)
