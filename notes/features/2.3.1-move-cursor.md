# Feature: Task 2.3.1 - Implement move_cursor/2 Callback

**Branch:** `feature/2.3.1-move-cursor`
**Base:** `multi-renderer`
**Date:** 2025-12-05

## Overview

Implement the `move_cursor/2` callback for the Raw backend. This callback positions the terminal cursor at specified coordinates using ANSI escape sequences.

## Reference

See `notes/planning/multi-renderer/phase-02-raw-backend.md` Section 2.3.1.

## Tasks

### Implementation

- [x] 2.3.1.1 Implement `@impl true` `move_cursor/2` accepting state and `{row, col}` position
- [x] 2.3.1.2 Generate `\e[row;colH` sequence using `TermUI.ANSI.cursor_position/2`
- [x] 2.3.1.3 Write sequence to stdout via `IO.write/1`
- [x] 2.3.1.4 Update `cursor_position` in state
- [x] 2.3.1.5 Return `{:ok, updated_state}`

### Unit Tests

- [x] Test `move_cursor/2` generates correct escape sequence for various positions
- [x] Test `move_cursor/2` updates state with new position
- [x] Test `move_cursor/2` handles edge positions (1,1), (max_row, max_col)
- [x] Test guard clauses reject invalid positions (0, negative)

## Files Modified

- `lib/term_ui/backend/raw.ex` - Implemented `move_cursor/2`
- `test/term_ui/backend/raw_test.exs` - Added 10 tests for move_cursor/2

## Design Notes

The current stub implementation already has:
- Guard clauses requiring positive integer coordinates
- Raises `FunctionClauseError` for invalid positions

The full implementation:
1. Generates the ANSI escape sequence using `ANSI.cursor_position/2`
2. Writes it to the terminal using `write_to_terminal/1`
3. Updates state with new position
4. Returns the updated state

## Verification

1. `mix compile` - no warnings ✓
2. `mix test test/term_ui/backend/raw_test.exs` - all 61 tests pass ✓
3. `mix format --check-formatted` - code formatted ✓
