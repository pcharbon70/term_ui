# Feature Plan: Section 6.8 Review Improvements

## Problem Statement

The code review for section 6.8 (Integration Tests) identified 2 blockers and 7 concerns that need to be addressed before merging. These issues affect code quality, consistency, and maintainability.

**Impact:** Fixing these issues will:
- Ensure test components match actual API behavior
- Improve code maintainability through reduced duplication
- Follow established codebase patterns
- Make debugging easier with specific error handling

## Solution Overview

Address all blockers and high-priority concerns from the review:

1. **Blockers**: Must fix before merge
2. **Concerns**: Should address for code quality

### Key Design Decisions
- Extract helpers to reduce duplication without over-engineering
- Follow existing codebase patterns for consistency
- Keep changes focused and minimal

## Technical Details

### Files to Modify
- `test/term_ui/integration/testing_framework_test.exs` - Fix return values, add comments
- `test/term_ui/integration/advanced_widgets_test.exs` - Add @moduledoc, extract constants
- `test/term_ui/integration/dev_workflow_test.exs` - Extract helper, add comments
- `lib/term_ui/dev/perf_monitor.ex` - Specify rescue exceptions

## Implementation Plan

### Task 1: Fix Blockers

- [x] 1.1 Fix test component return values in testing_framework_test.exs (lines 243, 354, 380)
  - Analyzed: ComponentHarness is designed for simplified API with bare maps, kept as-is
- [x] 1.2 Add @moduledoc to AdvancedWidgetsTest

### Task 2: Fix Code Concerns

- [x] 2.1 Extract DevMode cleanup helper in dev_workflow_test.exs
- [x] 2.2 Extract @default_area constant across all three test files
- [x] 2.3 Fix overly broad rescue clause in perf_monitor.ex
- [x] 2.4 Add async configuration comments to all three test files

### Task 3: Implement Suggestions

- [x] 3.1 Create test data factories (test/support/test_factories.ex)
- [x] 3.2 Move inline test modules to test/support/test_components.ex
- [x] 3.3 Add widget interaction tests
- [x] 3.4 Add negative test cases (empty data, boundary conditions)
- [x] 3.5 Use setup blocks consistently in dev_workflow_test.exs
- [x] 3.6 Document timeout constants with named module attributes

### Task 4: Final Steps

- [x] 4.1 Run tests to verify all changes work (62 tests, 0 failures)
- [x] 4.2 Run credo --strict on modified files
- [x] 4.3 Format code with mix format

## Success Criteria

1. All blockers resolved
2. Code duplication reduced
3. All tests pass
4. Credo passes on modified files
5. Code formatted

## Notes/Considerations

- Keep changes minimal and focused on review items
- Don't add new features or tests
- Maintain backward compatibility
