# Feature 2.1.2: Define Internal State Structure

## Overview

Define the internal state struct for `TermUI.Backend.Raw` to track terminal state within the backend. This struct maintains information about terminal dimensions, cursor state, alternate screen usage, mouse tracking, and current style for optimized rendering.

## Reference

- Phase plan: `notes/planning/multi-renderer/phase-02-raw-backend.md`
- Task: 2.1.2 Define Internal State Structure
- Part of: Section 2.1 Create Raw Backend Module Structure
- Depends on: Task 2.1.1 (complete)

## Subtasks

- [x] 2.1.2.1 Define `defstruct` with field `size :: {rows :: pos_integer(), cols :: pos_integer()}`
- [x] 2.1.2.2 Define field `cursor_visible :: boolean()` defaulting to `false` (hidden during rendering)
- [x] 2.1.2.3 Define field `cursor_position :: {row :: pos_integer(), col :: pos_integer()} | nil`
- [x] 2.1.2.4 Define field `alternate_screen :: boolean()` tracking alternate screen state
- [x] 2.1.2.5 Define field `mouse_mode :: :none | :click | :drag | :all` tracking mouse tracking state
- [x] 2.1.2.6 Define field `current_style :: Style.t() | nil` for tracking current SGR state to minimize output

## Implementation Notes

### State Structure

```elixir
defstruct [
  :size,              # {rows, cols} - terminal dimensions
  cursor_visible: false,  # boolean - cursor visibility
  cursor_position: nil,   # {row, col} | nil - current cursor position
  alternate_screen: false, # boolean - alternate screen active
  mouse_mode: :none,      # :none | :click | :drag | :all
  current_style: nil      # map | nil - current SGR state for delta tracking
]
```

### Type Specifications

Add `@type t` for the state struct and document each field.

### Style Tracking

The `current_style` field tracks the current SGR (Select Graphic Rendition) state to enable style delta optimization - only emitting escape sequences for changed attributes.

## Testing Strategy

- Test struct has all expected fields
- Test default values are correct
- Test struct can be created and pattern matched
- Test type specifications compile

## Files to Modify

- `lib/term_ui/backend/raw.ex` - Add state struct definition
- `test/term_ui/backend/raw_test.exs` - Add state struct tests
