# Feature: FormBuilder Widget (6.9.1)

## Problem Statement

TermUI lacks a structured form building widget for complex data entry scenarios. Users need a way to create forms with multiple field types, validation, navigation, and dynamic behavior.

## Solution Overview

Implement a FormBuilder widget that:
- Supports multiple field types: text, password, checkbox, radio, select, multi-select
- Provides Tab navigation between fields
- Displays validation errors inline
- Supports conditional fields (show/hide based on values)
- Supports field grouping with collapsible sections
- Provides on_submit and on_change callbacks

## Technical Details

### Files to Create
- `lib/term_ui/widgets/form_builder.ex` - Main FormBuilder widget
- `lib/term_ui/widgets/form_field.ex` - Field type definitions and rendering
- `test/term_ui/widgets/form_builder_test.exs` - Tests
- `examples/form_builder/` - Example application

### Field Types

1. **Text** - Single line text input
2. **Password** - Masked text input
3. **Checkbox** - Boolean toggle
4. **Radio** - Single selection from options
5. **Select** - Dropdown single selection
6. **Multi-Select** - Multiple selection from options

### State Structure

```elixir
%{
  fields: [field_def()],
  values: %{field_id => value},
  errors: %{field_id => [error_msg]},
  focused_field: field_id | nil,
  groups: [group_def()],
  collapsed_groups: MapSet.t(),
  on_submit: callback,
  on_change: callback
}
```

### Field Definition

```elixir
%{
  id: atom(),
  type: :text | :password | :checkbox | :radio | :select | :multi_select,
  label: String.t(),
  options: [option()] | nil,  # for radio/select/multi_select
  required: boolean(),
  validators: [validator()],
  visible_when: condition() | nil,
  group: atom() | nil,
  placeholder: String.t() | nil
}
```

## Implementation Plan

### Step 1: Core FormBuilder Structure ✅
- [x] Create FormBuilder module with StatefulComponent
- [x] Define field types and state structure
- [x] Implement init/1 with field definitions
- [x] Basic render/2 for text fields

### Step 2: Field Types ✅
- [x] Text field rendering and input handling
- [x] Password field with masked display
- [x] Checkbox field with toggle
- [x] Radio field with option selection
- [x] Select field with dropdown
- [x] Multi-select field

### Step 3: Navigation ✅
- [x] Tab/Shift+Tab navigation between fields
- [x] Arrow key navigation within fields
- [x] Focus tracking and visual feedback

### Step 4: Validation ✅
- [x] Required field validation
- [x] Custom validator functions
- [x] Error display below fields
- [x] Validation on blur and submit

### Step 5: Conditional Fields ✅
- [x] visible_when condition evaluation
- [x] Dynamic field visibility
- [x] Skip hidden fields in navigation

### Step 6: Field Grouping ✅
- [x] Group definition with label
- [x] Collapsible groups
- [x] Group rendering with borders

### Step 7: Callbacks ✅
- [x] on_change callback on value updates
- [x] on_submit callback on form submission
- [x] Form data extraction helpers

### Step 8: Tests ✅
- [x] Unit tests for all field types
- [x] Navigation tests
- [x] Validation tests
- [x] Conditional field tests
- [x] Integration tests

### Step 9: Example Application ✅
- [x] Create form_builder example
- [x] Demo all field types
- [x] Demo validation
- [x] Demo conditional fields

## Success Criteria

- [x] All 7 sub-tasks from planning doc complete
- [x] All field types render correctly
- [x] Tab navigation works between fields
- [x] Validation displays error messages
- [x] Conditional fields show/hide based on values
- [x] Comprehensive test coverage (38 tests)
- [x] Working example application

## Current Status

**Status**: Complete

**What Works**:
- Core FormBuilder structure
- All field types implemented (text, password, checkbox, radio, select, multi-select)
- Tab/Shift+Tab navigation between fields
- Arrow key navigation within options
- Validation with error display
- Conditional fields with visible_when
- Field grouping with collapsible sections
- on_submit and on_change callbacks

**Test Coverage**:
- 38 tests, all passing
- Tests cover all field types, navigation, validation, callbacks, and API
