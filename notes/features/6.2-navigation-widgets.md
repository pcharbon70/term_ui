# Feature Plan: Section 6.2 - Navigation Widgets

## Problem Statement

TermUI needs navigation widgets for organizing content and actions. Tabs display multiple panels with a tab bar for switching between them. Menu displays hierarchical actions with keyboard navigation. Context menu appears at cursor position on right-click. These widgets are essential for any non-trivial application.

## Solution Overview

Implement three navigation widgets:

1. **Tabs Widget** - Switchable content panels with tab bar
2. **Menu Widget** - Hierarchical action list with keyboard navigation
3. **Context Menu** - Floating menu at cursor position

### Key Design Decisions

- **StatefulComponent-based** - All widgets maintain selection/focus state
- **Keyboard-first** - Full keyboard navigation support
- **Callback-driven** - Parent notified via callbacks for changes
- **Composable** - Widgets can contain other components

## Technical Details

### File Structure

```
lib/term_ui/widgets/
├── tabs.ex           # Tabs widget
├── menu.ex           # Menu widget
└── context_menu.ex   # Context menu widget
```

### Dependencies

- `TermUI.StatefulComponent` - Behaviour for stateful widgets
- `TermUI.Component.Helpers` - Render tree builders
- `TermUI.Event` - Keyboard and mouse events

## Implementation Plan

### Task 6.2.1: Tabs Widget

- [x] 6.2.1.1 Implement tab bar rendering with tab labels
- [x] 6.2.1.2 Implement content panel switching on tab selection
- [x] 6.2.1.3 Implement keyboard navigation: Left/Right for tabs, Enter to select
- [x] 6.2.1.4 Implement disabled and closeable tab variants
- [x] 6.2.1.5 Implement `on_change` callback for tab switches

### Task 6.2.2: Menu Widget

- [x] 6.2.2.1 Implement menu item types: action, submenu, separator, checkbox
- [x] 6.2.2.2 Implement menu rendering with indentation for hierarchy
- [x] 6.2.2.3 Implement keyboard navigation: arrows to move, Enter to select
- [x] 6.2.2.4 Implement submenu expansion showing nested items
- [x] 6.2.2.5 Implement shortcut display aligned right

### Task 6.2.3: Context Menu

- [x] 6.2.3.1 Implement context menu trigger on right-click or shortcut
- [x] 6.2.3.2 Implement floating overlay positioning at click location
- [x] 6.2.3.3 Implement close on selection, Escape, or outside click
- [x] 6.2.3.4 Implement z-order ensuring context menu above other content

### Unit Tests

- [x] Test tabs render tab bar with labels
- [x] Test tab selection shows correct content panel
- [x] Test keyboard navigation moves between tabs
- [x] Test menu renders items with correct hierarchy
- [x] Test menu selection triggers action
- [x] Test context menu appears at click position
- [x] Test context menu closes on selection

## Success Criteria

1. Tabs switch content panels correctly
2. Menu navigates with keyboard and triggers actions
3. Context menu appears at correct position
4. All keyboard shortcuts work
5. All unit tests pass

## Current Status

- **Planning**: Complete
- **Implementation**: Complete
- **Tests**: Complete
